{{template "base" .}}

{{define "content"}}
<div class="container">
	<div class="row">
		<div class="col">
			<h1 class="mt-3">Design Patterns in Go</h1>
			<hr>
			<h3>Factory</h3>
			<div>
				<a href="javascript:void(0);" id="dog-factory-btn" class="btn btn-outline-secondary">
					Get a dog from factory
				<a/>
				<a href="javascript:void(0);" id="cat-factory-btn" class="btn btn-outline-secondary">
					Get a cat from factory
				<a/>
			</div>
			<div class="mt-2 result">
				<pre id="factory-output"><span class="text-muted">Noting received yet...</span></pre>
			</div>

			<hr class="mt-4">

			<h3 class="mt-3">Design Patterns in Go</h3>

			<div>
				<a href="javascript:void(0);" id="dog-abstract-btn" class="btn btn-outline-secondary">
					Get a dog from abstract factory
				<a/>
				<a href="javascript:void(0);" id="cat-abstract-btn" class="btn btn-outline-secondary">
					Get a cat from abstract factory
				<a/>
			</div>

			<div class="mt-2 result">
				<pre id="abstract-output"><span class="text-muted">Noting received yet...</span></pre>
			</div>
		</div>
	</div>
</div>
{{end}}

{{define "js"}}
<script>
let dogFactoryBtn = document.getElementById("dog-factory-btn");
let catFactoryBtn = document.getElementById("cat-factory-btn");
let factoryOutput = document.getElementById("factory-output");

let dogAbstractBtn = document.getElementById("dog-abstract-btn");
let catAbstractBtn = document.getElementById("cat-abstract-btn");
let abstractOutput = document.getElementById("abstract-output");

document.addEventListener("DOMContentLoaded", function (){
	dogFactoryBtn.addEventListener("click", function (){
		fetch("api/dog-factory", {method: 'post'})
		.then((response) => response.json())
		.then((data) => {
			if (data.error){
				factoryOutput.innerHTML = data.error;
				return
			}
			factoryOutput.innerHTML = JSON.stringify(data, undefined, 4);
		})
	})

	catFactoryBtn.addEventListener("click", function (){
		fetch("api/cat-factory", {method: 'post'})
		.then((response) => response.json())
		.then((data) => {
			if (data.error){
				factoryOutput.innerHTML = data.error;
				return
			}
			factoryOutput.innerHTML = JSON.stringify(data, undefined, 4);
		})
	})

	dogAbstractBtn.addEventListener("click", function (){
		fetch("api/dog-cat-abstract-factory/dog", {method: 'GET'})
		.then((response) => response.json())
		.then((data) => {
			if (data.error){
				abstractOutput.innerHTML = data.error;
				return
			}
			abstractOutput.innerHTML = JSON.stringify(data, undefined, 4);
		})
	})

	catAbstractBtn.addEventListener("click", function (){
		fetch("api/dog-cat-abstract-factory/cat", {method: 'GET'})
		.then((response) => response.json())
		.then((data) => {
			if (data.error){
				abstractOutput.innerHTML = data.error;
				return
			}
			abstractOutput.innerHTML = JSON.stringify(data, undefined, 4);
		})
	})
})
</script>
{{end}}